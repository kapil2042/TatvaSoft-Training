@{
    ViewData["Title"] = "Home Page";
}
@model VMMissions

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
<script>
    id = 0;
    function myfilter(fpg,fid,c){
        if(c!=null){
            country = c;
        }
        else{
            country = "";
        }

        var cities = "";
        $("input[name='city']:checked").each(function () {
            cities += $(this).val() + ",";
        });

        var theme = "";
        $("input[name='theme']:checked").each(function () {
            theme += $(this).val() + ",";
        });

        var skill = "";
        $("input[name='skill']:checked").each(function () {
            skill += $(this).val() + ",";
        });


        if(fid!=0){
            id=fid;
        }


        var searchquery = $("input[name='search']").val();
        $.ajax({
            type: 'POST',
            url: "/Volunteer/Home/filterMissions",
            data: { 'pg': fpg, 'id': id,'search': searchquery, 'country': country, 'cities': cities, 'theme': theme, 'skill': skill },
            success: function (res) {
                $('#missionajax').html($($.parseHTML(res)).filter("#missions")[0].innerHTML);
                $('#pagination').html($($.parseHTML(res)).filter("#paginationpartial")[0].innerHTML);
                $('#uper').html($($.parseHTML(res)).filter("#uperpartial")[0].innerHTML);
            },
            error: function (data) {
                alert("some Error");
            }
        });

    }


    $(document).ready(function(){
        myfilter(fpg = 1, fid = 0);
    })
</script>


<link rel="stylesheet" href="~/css/mission_page.css" asp-append-version="true" />
<script src="~/js/ajax.js" asp-append-version="true"></script>
<partial name="filter" model="Model"></partial>

<partial name="secondNav" model="Model"></partial>


<div id="uper">

</div>


<div id="missionajax" class="container-lg container-fluid">
</div>


<div id="pagination">

</div>